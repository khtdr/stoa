"use strict";var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var c=(o,t)=>i(o,"name",{value:t,configurable:!0});var g=(o,t)=>{for(var e in t)i(o,e,{get:t[e],enumerable:!0})},m=(o,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of d(t))!l.call(o,n)&&n!==e&&i(o,n,{get:()=>t[n],enumerable:!(s=p(t,n))||s.enumerable});return o};var a=o=>m(i({},"__esModule",{value:!0}),o);var h={};g(h,{Repl:()=>u});module.exports=a(h);var u=class{constructor(t){this.lang=t;this.prompt_width=0}prompt(){this.prompt_width=2,process.stdout.write("> ")}async run(){let{stdin:t,stdout:e}=process;t.setRawMode(!0),t.setEncoding("utf8"),console.log("help: ?\u23CE"),console.log("exit: CTRL-d"),t.resume();let s="";return this.prompt(),new Promise(n=>{t.on("data",r=>{t.pause(),[""].includes(r.toString())&&(t.destroy(),n(void 0)),r.toString().match(/[\p{Cc}\p{Cn}\p{Cs}]+/gu)||(s+=r.toString(),e.write(r)),r.toString()=="\x1B[C"&&process.stdout.moveCursor(-1,0),r.toString()=="\x1B[D"&&process.stdout.moveCursor(1,0),["\x7F"].includes(r.toString())&&(s=s.substring(0,s.length-1),process.stdout.cursorTo(0),process.stdout.clearLine(0),this.prompt(),e.write(s)),["\r",`
`].includes(r.toString())&&(process.stdout.moveCursor(0,1),process.stdout.cursorTo(0),console.log(""),this.lang.run("repl",s),s="",this.prompt()),t.resume()})})}};c(u,"Repl");0&&(module.exports={Repl});
//# sourceMappingURL=index.js.map